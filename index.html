<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PlaylistPro - YouTube Playlist Details Extractor</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    * {
      font-family: 'Poppins', sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }
    
    .card {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.95);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      border-radius: 24px;
      overflow: hidden;
      width: 100%;
      max-width: 600px;
      transition: all 0.4s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
    }
    
    .input-field {
      transition: all 0.3s ease;
      border: 2px solid #e2e8f0;
      border-radius: 14px;
      padding: 1rem 1.5rem;
      font-size: 1rem;
    }
    
    .input-field:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
    }
    
    .input-field:hover {
      border-color: #a3bffa;
    }
    
    .btn-primary {
      background: linear-gradient(to right, #667eea, #764ba2);
      transition: all 0.3s ease;
      border-radius: 14px;
      padding: 1rem 2rem;
      font-weight: 600;
      font-size: 1.1rem;
    }
    
    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
    }
    
    .btn-success {
      background: linear-gradient(to right, #0f9b0f, #00c853);
      transition: all 0.3s ease;
      border-radius: 12px;
      padding: 0.75rem 1.5rem;
    }
    
    .btn-success:hover {
      transform: translateY(-2px);
      box-shadow: 0 7px 14px rgba(0, 200, 83, 0.4);
    }
    
    .result-container {
      max-height: 400px;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #cbd5e0 #f7fafc;
      border-radius: 16px;
      background: #f8fafc;
      padding: 1.5rem;
    }
    
    .result-container::-webkit-scrollbar {
      width: 8px;
    }
    
    .result-container::-webkit-scrollbar-track {
      background: #f7fafc;
      border-radius: 4px;
    }
    
    .result-container::-webkit-scrollbar-thumb {
      background: #cbd5e0;
      border-radius: 4px;
    }
    
    .result-container::-webkit-scrollbar-thumb:hover {
      background: #a0aec0;
    }
    
    .tooltip {
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
      transform: translateY(5px);
    }
    
    .tooltip.show {
      visibility: visible;
      opacity: 1;
      transform: translateY(0);
    }
    
    .video-item {
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      background: white;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }
    
    .video-item:hover {
      transform: translateX(5px);
      border-left-color: #667eea;
      background-color: #f8fafc;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.03); }
      100% { transform: scale(1); }
    }
    
    .progress-bar {
      height: 6px;
      border-radius: 3px;
      background: #e2e8f0;
      overflow: hidden;
      margin-top: 1rem;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(to right, #667eea, #764ba2);
      border-radius: 3px;
      width: 0%;
      transition: width 0.5s ease;
    }
    
    @media (max-width: 640px) {
      .card {
        padding: 1.5rem;
        border-radius: 20px;
      }
      
      .input-field {
        padding: 0.875rem 1.25rem;
      }
      
      .btn-primary {
        padding: 0.875rem 1.5rem;
        font-size: 1rem;
      }
      
      .result-container {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="card p-6 md:p-8">
    <div class="text-center mb-8">
      <div class="inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-4">
        <i class="fab fa-youtube text-red-600 text-4xl"></i>
      </div>
      <h1 class="text-3xl md:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-600">
        PlaylistPro
      </h1>
      <p class="text-gray-600 mt-2">Extract details from any YouTube playlist</p>
    </div>
    
    <div class="mb-6 bg-blue-50 p-4 rounded-xl border border-blue-200 flex items-start">
      <div class="mr-3 mt-1 text-blue-500">
        <i class="fas fa-info-circle"></i>
      </div>
      <p class="text-blue-700 text-sm">
        <span class="font-medium">How it works:</span> Paste a YouTube playlist link below and we'll extract all video details for you.
      </p>
    </div>
    
    <div class="mb-6">
      <label for="playlistLink" class="block text-sm font-medium text-gray-700 mb-2 flex items-center">
        <span class="bg-blue-100 text-blue-600 rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2">1</span>
        YouTube Playlist Link
      </label>
      <div class="flex items-center">
        <span class="text-red-600 mr-2 text-xl"><i class="fab fa-youtube"></i></span>
        <input
          type="text"
          id="playlistLink"
          placeholder="https://www.youtube.com/playlist?list=..."
          class="input-field flex-1 focus:outline-none focus:ring-0"
        />
      </div>
    </div>
    
    <button
      onclick="fetchPlaylistDetails()"
      class="btn-primary w-full text-white p-4 rounded-xl font-medium text-lg flex items-center justify-center pulse mb-6"
    >
      <i class="fas fa-bolt mr-3"></i>Extract Playlist Details
    </button>
    
    <div class="progress-bar hidden" id="progressContainer">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    
    <div id="loading" class="hidden mt-8 text-center py-8">
      <div class="inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4">
        <i class="fas fa-spinner fa-spin text-2xl text-blue-500"></i>
      </div>
      <p class="text-gray-600">Fetching playlist details from YouTube...</p>
      <p class="text-gray-500 text-sm mt-2" id="statusText">Initializing</p>
    </div>
    
    <div id="result" class="mt-8 hidden fade-in">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold text-gray-800 flex items-center">
          <i class="fas fa-list-alt mr-2 text-blue-500"></i>Playlist Details
        </h2>
        <span id="resultCount" class="bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full"></span>
      </div>
      
      <div class="result-container mb-6">
        <div id="videoResults" class="space-y-4"></div>
      </div>
      
      <div class="flex justify-between items-center">
        <button
          id="copyButton"
          onclick="copyToClipboard()"
          class="btn-success text-white p-3 rounded-lg flex items-center relative"
        >
          <i class="fas fa-copy mr-2"></i>Copy JSON
          <span id="tooltip" class="tooltip absolute -top-10 bg-gray-800 text-white text-xs rounded py-1 px-2">Copied to clipboard!</span>
        </button>
        
        <button
          onclick="clearAllFields()"
          class="text-gray-500 hover:text-gray-700 flex items-center"
        >
          <i class="fas fa-trash-alt mr-2"></i>Clear All
        </button>
      </div>
    </div>
    
    <div id="error" class="mt-6 p-4 bg-red-50 text-red-700 rounded-lg border border-red-200 hidden fade-in">
      <div class="flex items-start">
        <i class="fas fa-exclamation-circle mt-1 mr-3"></i>
        <div>
          <span class="font-medium">Error:</span>
          <span id="errorText"></span>
        </div>
      </div>
    </div>
  </div>

  <script>
    function extractPlaylistId(url) {
      const regex = /[?&]list=([^"&?\/\s]+)/;
      const match = url.match(regex);
      return match ? match[1] : null;
    }

    async function fetchPlaylistDetails() {
      const playlistLink = document.getElementById('playlistLink').value;
      const resultDiv = document.getElementById('result');
      const videoResults = document.getElementById('videoResults');
      const errorDiv = document.getElementById('error');
      const errorText = document.getElementById('errorText');
      const loadingDiv = document.getElementById('loading');
      const resultCount = document.getElementById('resultCount');
      const progressContainer = document.getElementById('progressContainer');
      const progressFill = document.getElementById('progressFill');
      const statusText = document.getElementById('statusText');

      // Reset display
      resultDiv.classList.add('hidden');
      errorDiv.classList.add('hidden');
      loadingDiv.classList.remove('hidden');
      progressContainer.classList.remove('hidden');
      videoResults.innerHTML = '';
      progressFill.style.width = '0%';

      // Extract playlist ID
      const playlistId = extractPlaylistId(playlistLink);
      if (!playlistId) {
        loadingDiv.classList.add('hidden');
        progressContainer.classList.add('hidden');
        errorText.textContent = 'Invalid YouTube playlist URL. Please enter a valid playlist link.';
        errorDiv.classList.remove('hidden');
        return;
      }

      const apiKey = 'AIzaSyD12wYSNog79Ifn2dQTqCtnqQreazxPx78'; // Replace with your API key
      const output = [];
      const errors = [];
      let videoIds = [];
      let nextPageToken = '';
      let totalVideos = 0;
      let processedVideos = 0;

      try {
        statusText.textContent = 'Fetching playlist information...';
        
        // Fetch all video IDs from the playlist
        do {
          const playlistUrl = `https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails&playlistId=${playlistId}&maxResults=50&key=${apiKey}${nextPageToken ? `&pageToken=${nextPageToken}` : ''}`;
          const playlistResponse = await fetch(playlistUrl);
          if (!playlistResponse.ok) {
            throw new Error('Failed to fetch playlist items. Check API key or network.');
          }
          const playlistData = await playlistResponse.json();
          videoIds = videoIds.concat(playlistData.items.map(item => item.contentDetails.videoId));
          nextPageToken = playlistData.nextPageToken || '';
          
          if (!totalVideos && playlistData.pageInfo) {
            totalVideos = playlistData.pageInfo.totalResults;
          }
          
          statusText.textContent = `Found ${videoIds.length} videos...`;
          progressFill.style.width = `${Math.min(20, (videoIds.length / totalVideos) * 20)}%`;
        } while (nextPageToken);

        if (videoIds.length === 0) {
          throw new Error('No videos found in the playlist.');
        }

        // Fetch video details in batches of 50
        for (let i = 0; i < videoIds.length; i += 50) {
          const batchIds = videoIds.slice(i, i + 50).join(',');
          const videoUrl = `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&id=${batchIds}&key=${apiKey}`;
          statusText.textContent = `Fetching details for videos ${i+1} to ${Math.min(i+50, videoIds.length)}...`;
          
          const videoResponse = await fetch(videoUrl);
          if (!videoResponse.ok) {
            throw new Error('Failed to fetch video details.');
          }
          const videoData = await videoResponse.json();

          videoData.items.forEach(video => {
            const result = {
              title: video.snippet.title || 'N/A',
              youtubeLink: `https://www.youtube.com/watch?v=${video.id}`,
              videoId: video.id,
              thumbnailUrl: `https://i.ytimg.com/vi/${video.id}/hqdefault.jpg`,
              description: video.snippet.description || 'N/A',
              views: parseInt(video.statistics.viewCount) || 0,
              uploadDate: new Date(video.snippet.publishedAt).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
              }) || 'N/A',
              channelTitle: video.snippet.channelTitle || 'N/A'
            };
            output.push(result);
            
            // Add to UI
            const videoElement = document.createElement('div');
            videoElement.className = 'video-item';
            videoElement.innerHTML = `
              <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-shrink-0">
                  <img src="${result.thumbnailUrl}" alt="Thumbnail" class="w-full md:w-40 rounded-lg shadow-sm">
                </div>
                <div class="flex-1">
                  <h3 class="font-bold text-lg mb-1 line-clamp-2">${result.title}</h3>
                  <p class="text-gray-600 text-sm mb-2"><span class="font-medium">Channel:</span> ${result.channelTitle}</p>
                  <p class="text-gray-600 text-sm mb-2"><span class="font-medium">Uploaded:</span> ${result.uploadDate}</p>
                  <p class="text-gray-600 text-sm mb-2"><span class="font-medium">Views:</span> ${result.views.toLocaleString()}</p>
                  <a href="${result.youtubeLink}" target="_blank" class="text-blue-500 hover:text-blue-700 text-xs mt-2 inline-block">
                    <i class="fab fa-youtube mr-1"></i>Watch on YouTube
                  </a>
                </div>
              </div>
            `;
            videoResults.appendChild(videoElement);
            
            processedVideos++;
            progressFill.style.width = `${20 + (processedVideos / videoIds.length) * 80}%`;
          });
        }

        // Update result count
        resultCount.textContent = `${output.length} video${output.length !== 1 ? 's' : ''} extracted`;
        
        // Display output
        resultDiv.classList.remove('hidden');
        if (errors.length > 0) {
          errorText.textContent = errors.join(', ');
          errorDiv.classList.remove('hidden');
        }
      } catch (error) {
        console.error(error);
        errorText.textContent = error.message || 'Could not fetch playlist details. Please check your API key and try again.';
        errorDiv.classList.remove('hidden');
      } finally {
        loadingDiv.classList.add('hidden');
        progressContainer.classList.add('hidden');
      }
    }

    function copyToClipboard() {
      const videoResults = document.getElementById('videoResults');
      const videos = videoResults.querySelectorAll('.video-item');
      const output = [];
      
      videos.forEach(video => {
        const title = video.querySelector('h3').textContent;
        const channel = video.querySelector('p:nth-child(2)').textContent.replace('Channel: ', '');
        const uploaded = video.querySelector('p:nth-child(3)').textContent.replace('Uploaded: ', '');
        const views = video.querySelector('p:nth-child(4)').textContent.replace('Views: ', '');
        const link = video.querySelector('a').href;
        const thumbnail = video.querySelector('img').src;
        
        output.push({
          title,
          channelTitle: channel,
          uploadDate: uploaded,
          views: views,
          youtubeLink: link,
          thumbnailUrl: thumbnail
        });
      });
      
      const tooltip = document.getElementById('tooltip');
      navigator.clipboard.writeText(JSON.stringify(output, null, 2)).then(() => {
        tooltip.classList.add('show');
        setTimeout(() => tooltip.classList.remove('show'), 2000);
      }).catch(err => {
        console.error('Failed to copy:', err);
        alert('Failed to copy to clipboard. Please try again.');
      });
    }
    
    function clearAllFields() {
      document.getElementById('playlistLink').value = '';
      
      const resultDiv = document.getElementById('result');
      const errorDiv = document.getElementById('error');
      resultDiv.classList.add('hidden');
      errorDiv.classList.add('hidden');
      
      const videoResults = document.getElementById('videoResults');
      videoResults.innerHTML = '';
    }
  </script>
</body>
</html>
